export default class ArticlesController {

    constructor($scope, $http) {
        this.scope = $scope;
        this.http = $http;
    }

    getArticles() {
        let $scope = this.scope;
        this.http.get('http://127.0.0.1:3000/article').success(function(data) {
            $scope.articles = data.data;
        });
    }

    addCommentListener() {
        let $scope = this.scope;
        let $http = this.http;
        console.log($scope);
        $scope.addComment = function(id) {
            var comment = {
                contenu : $scope.commentaire,
                //TODO : matching avec le user connect√©
                auteur : "test"
            };
            console.log(id);
            $http.post('http://127.0.0.1:3000/article/'+ id, comment).success(function(data) {
                console.log(data);
                $http.get('http://127.0.0.1:3000/article').success(function(data) {
                    $scope.articles = data.data;
                });
            });
        }
    }
}
